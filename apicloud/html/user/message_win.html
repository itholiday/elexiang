<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<meta name="format-detection" content="telephone=no" />
		<title>e乐享</title>
		<link rel="stylesheet" type="text/css" href="../../css/aui.css" />
		<link rel="stylesheet" type="text/css" href="../../css/suxiang.css" />
		<style>
			#sx-header {
				background: #fff;
			}
			.aui-bar-nav a, .aui-bar-nav .aui-btn .aui-iconfont, .aui-bar-nav {
				color: #333
			}
			.asdlkhjasd {
				border-bottom: 1px solid #e8e8e8;
				overflow: hidden
			}
			.asdpoiasd {
				clear: both;
				border-bottom: 1px solid #e8e8e8;
				background: #F6F4F0
			}
			.asdpoiasd .aui-tab {
				background: #F6F4F0
			}
			.aui-tab-item.aui-active{
				border-bottom: 2px solid #FF2D4B
			}
		</style>
	</head>
	<body>
		<header class="aui-bar aui-bar-nav" id="sx-header">
			<div class="asdlkhjasd">
				<a class="aui-pull-left aui-btn" tapmode onclick="_close()"> <span class="aui-iconfont aui-icon-left"></span> </a>
				<div class="aui-title">
					消息中心
				</div>
			</div>
			<div class="asdpoiasd">
				<div class="aui-tab fx-tab">
					<div class="aui-tab-item aui-active" id="tab0" tapmode onclick="randomSwitchBtn(0)">
						系统消息
					</div>
					<div class="aui-tab-item" id="tab1" tapmode  onclick="randomSwitchBtn(1)">
						晒单回复
					</div>
				</div>
			</div>
		</header>
	</body>
	<script type="text/javascript" src="../../script/api.js"></script>
	<script type="text/javascript" src="../../script/app.js"></script>
	<script type="text/javascript">
		apiready = function() {
			var len = $api.domAll($api.dom('.fx-tab'), 'div.aui-tab-item');
			var frames = [];
			for (var i = 0; i < len.length; i++) {
				var frame = {};
				frame.name = 'xiaoxi_' + i;
				frame.url = html_win + 'user/message.html';
				frame.pageParam = {
					type : i,
				};
				frames.push(frame);
			}
			openFrameGroup(frames)
		}
		function openFrameGroup(frames) {
			var header = $api.byId('sx-header');
			$api.fixStatusBar(header);
			var headerPos = $api.offset(header);
			api.openFrameGroup({
				name : 'xiaoxi',
				scrollEnabled : true,
				bounces : true,
				rect : {
					x : 0,
					y : headerPos.h,
					w : 'auto',
					h : api.winHeight - headerPos.h,
				},
				index : api.pageParam['type'],
				frames : frames,
				preload : 0,	// 预加载的 frame 个数，默认加载当前页后面一个
			}, function(ret, err) {
				var index = ret.index;
				active(index)
			});
		}

		// 点击分类栏目时，设置 frame 组当前可见 frame
		function randomSwitchBtn(index) {
			active(index)
			api.setFrameGroupIndex({
				name : 'xiaoxi',
				index : index,
				scroll : true, //是否平滑滚动至目标窗口，即是否带有动画
			});
		}

		// 点击样式
		function active(index) {
			$api.removeCls($api.dom(".fx-tab .aui-active"), 'aui-active');
			$api.addCls($api.byId('tab' + index), 'aui-active');
		}
	</script>
</html>
